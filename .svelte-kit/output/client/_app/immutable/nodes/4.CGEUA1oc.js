var Ne=t=>{throw TypeError(t)};var je=(t,e,a)=>e.has(t)||Ne("Cannot "+a);var de=(t,e,a)=>(je(t,e,"read from private field"),a?a.call(t):e.get(t)),ue=(t,e,a)=>e.has(t)?Ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ve=(t,e,a,s)=>(je(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a);import{f as O,a as j,t as re}from"../chunks/3szAqqJG.js";import{c as xt,b as kt,d as me,h as q,i as At,m as Et,x as c,G as St,r as Tt,o as zt,p as We,s as pe,f as X,ai as Mt,q as it,t as lt,v as Pt,ax as he,am as ot,ab as Ue,B as Ct,ay as Ae,az as Se,aA as Ht,al as Lt,aB as Nt,Q as jt,aC as Te,aD as Wt,g as Ut,af as Dt,aE as ct,ad as It,aF as De,aG as Rt,ar as Ot,k as ft,as as dt,Z as Ft,aH as qt,A as Ee,aI as Bt,av as Jt,_ as Vt,T as I,a0 as be,a1 as V,a2 as Gt,$ as Kt,R as F,aJ as Qt,V as U,aw as L}from"../chunks/DWX-CblI.js";import{o as Yt,d as Xt,e as Zt,s as Z}from"../chunks/ZSwmcxwl.js";import{p as $t,i as Q}from"../chunks/D4Y2jHfP.js";import{h as ea}from"../chunks/F6T_R6ON.js";import{t as ta,r as aa,s as Ie,a as Re,c as ra}from"../chunks/BjM4firo.js";import{i as sa,a as na,b as ia,c as la}from"../chunks/B_PdeQ9u.js";function oa(t,e){return e}function ca(t,e,a,s){for(var n=[],f=e.length,d=0;d<f;d++)Ht(e[d].e,n,!0);var h=f>0&&n.length===0&&a!==null;if(h){var _=a.parentNode;Lt(_),_.append(a),s.clear(),J(t,e[0].prev,e[f-1].next)}Nt(n,()=>{for(var w=0;w<f;w++){var y=e[w];h||(s.delete(y.k),J(t,y.prev,y.next)),jt(y.e,!h)}})}function se(t,e,a,s,n,f=null){var d=t,h={flags:e,items:new Map,first:null},_=(e&ct)!==0;if(_){var w=t;d=q?me(At(w)):w.appendChild(xt())}q&&Et();var y=null,H=!1,v=St(()=>{var b=a();return Dt(b)?b:b==null?[]:ot(b)});kt(()=>{var b=c(v),l=b.length;if(H&&l===0)return;H=l===0;let M=!1;if(q){var S=Tt(d)===zt;S!==(l===0)&&(d=We(),me(d),pe(!1),M=!0)}if(q){for(var A=null,z,u=0;u<l;u++){if(X.nodeType===8&&X.data===Mt){d=X,M=!0,pe(!1);break}var r=b[u],p=s(r,u);z=ut(X,h,A,null,r,p,u,n,e,a),h.items.set(p,z),A=z}l>0&&me(We())}q||fa(b,h,d,n,e,s,a),f!==null&&(l===0?y?it(y):y=lt(()=>f(d)):y!==null&&Pt(y,()=>{y=null})),M&&pe(!0),c(v)}),q&&(d=X)}function fa(t,e,a,s,n,f,d){var P,D,C,T;var h=(n&Rt)!==0,_=(n&(Te|Se))!==0,w=t.length,y=e.items,H=e.first,v=H,b,l=null,M,S=[],A=[],z,u,r,p;if(h)for(p=0;p<w;p+=1)z=t[p],u=f(z,p),r=y.get(u),r!==void 0&&((P=r.a)==null||P.measure(),(M??(M=new Set)).add(r));for(p=0;p<w;p+=1){if(z=t[p],u=f(z,p),r=y.get(u),r===void 0){var o=v?v.e.nodes_start:a;l=ut(o,e,l,l===null?e.first:l.next,z,u,p,s,n,d),y.set(u,l),S=[],A=[],v=l.next;continue}if(_&&da(r,z,p,n),(r.e.f&he)!==0&&(it(r.e),h&&((D=r.a)==null||D.unfix(),(M??(M=new Set)).delete(r))),r!==v){if(b!==void 0&&b.has(r)){if(S.length<A.length){var i=A[0],m;l=i.prev;var x=S[0],E=S[S.length-1];for(m=0;m<S.length;m+=1)Oe(S[m],i,a);for(m=0;m<A.length;m+=1)b.delete(A[m]);J(e,x.prev,E.next),J(e,l,x),J(e,E,i),v=i,l=E,p-=1,S=[],A=[]}else b.delete(r),Oe(r,v,a),J(e,r.prev,r.next),J(e,r,l===null?e.first:l.next),J(e,l,r),l=r;continue}for(S=[],A=[];v!==null&&v.k!==u;)(v.e.f&he)===0&&(b??(b=new Set)).add(v),A.push(v),v=v.next;if(v===null)continue;r=v}S.push(r),l=r,v=r.next}if(v!==null||b!==void 0){for(var k=b===void 0?[]:ot(b);v!==null;)(v.e.f&he)===0&&k.push(v),v=v.next;var g=k.length;if(g>0){var W=(n&ct)!==0&&w===0?a:null;if(h){for(p=0;p<g;p+=1)(C=k[p].a)==null||C.measure();for(p=0;p<g;p+=1)(T=k[p].a)==null||T.fix()}ca(e,k,W,y)}}h&&It(()=>{var B;if(M!==void 0)for(r of M)(B=r.a)==null||B.apply()}),Ue.first=e.first&&e.first.e,Ue.last=l&&l.e}function da(t,e,a,s){(s&Te)!==0&&De(t.v,e),(s&Se)!==0?De(t.i,a):t.i=a}function ut(t,e,a,s,n,f,d,h,_,w){var y=(_&Te)!==0,H=(_&Wt)===0,v=y?H?Ct(n,!1,!1):Ae(n):n,b=(_&Se)===0?d:Ae(d),l={i:b,v,k:f,a:null,e:null,prev:a,next:s};try{return l.e=lt(()=>h(t,v,b,w),q),l.e.prev=a&&a.e,l.e.next=s&&s.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function Oe(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,f=t.e.nodes_start;f!==s;){var d=Ut(f);n.before(f),f=d}}function J(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Fe(t,e,a){Ot(()=>{var s=ft(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var n=!1,f={};dt(()=>{var d=a();Ft(d),n&&qt(f,d)&&(f=d,s.update(d))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function $(t,e,a,s,n,f){var d=t.__className;if(q||d!==a||d===void 0){var h=ta(a,s,f);(!q||h!==t.getAttribute("class"))&&(h==null?t.removeAttribute("class"):t.className=h),t.__className=a}else if(f&&n!==f)for(var _ in f){var w=!!f[_];(n==null||w!==!!n[_])&&t.classList.toggle(_,w)}return f}function ua(t){Ee(t,t.v+1)}function va(t){let e=0,a=Ae(0),s;return()=>{Bt()&&(c(a),dt(()=>(e===0&&(s=ft(()=>t(()=>ua(a)))),e+=1,()=>{Jt().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}var te,ae;class ma{constructor(e,a){ue(this,te);ue(this,ae);ve(this,te,e),ve(this,ae,va(a))}get current(){return de(this,ae).call(this),de(this,te).call(this)}}te=new WeakMap,ae=new WeakMap;const pa=/\(.+\)/,ha=new Set(["all","print","screen","and","or","not","only"]);class ba extends ma{constructor(e,a){let s=pa.test(e)||e.split(/[\s,]+/).some(f=>ha.has(f.trim()))?e:`(${e})`;const n=window.matchMedia(s);super(()=>n.matches,f=>Yt(n,"change",f))}}function _a(t){const e=JSON.parse(t);return e.data&&(e.data=ia(e.data,la.decoders)),e}function _e(t){return HTMLElement.prototype.cloneNode.call(t)}function ye(t,e=()=>{}){const a=async({action:n,result:f,reset:d=!0,invalidateAll:h=!0})=>{f.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(t),h&&await sa()),(location.origin+location.pathname===n.origin+n.pathname||f.type==="redirect"||f.type==="error")&&await na(f)};async function s(n){var M,S,A,z,u;if(((M=n.submitter)!=null&&M.hasAttribute("formmethod")?n.submitter.formMethod:_e(t).method)!=="post")return;n.preventDefault();const d=new URL((S=n.submitter)!=null&&S.hasAttribute("formaction")?n.submitter.formAction:_e(t).action),h=(A=n.submitter)!=null&&A.hasAttribute("formenctype")?n.submitter.formEnctype:_e(t).enctype,_=new FormData(t),w=(z=n.submitter)==null?void 0:z.getAttribute("name");w&&_.append(w,((u=n.submitter)==null?void 0:u.getAttribute("value"))??"");const y=new AbortController;let H=!1;const b=await e({action:d,cancel:()=>H=!0,controller:y,formData:_,formElement:t,submitter:n.submitter})??a;if(H)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});h!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(h)?h:"application/x-www-form-urlencoded");const p=h==="multipart/form-data"?_:new URLSearchParams(_),o=await fetch(d,{method:"POST",headers:r,cache:"no-store",body:p,signal:y.signal});l=_a(await o.text()),l.type==="error"&&(l.status=o.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await b({action:d,formData:_,formElement:t,update:r=>a({action:d,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",s),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",s)}}}var qe="mz3PUW_p",Be=["#FFC700","#FF0000","#2E3191","#41BBC7"],Je=3500,Ve=.5,Ge=150,Ke="mix",Qe=12,Ye="",Xe=!0,Ze=800,$e=1600;function ge(t,e={}){let{colors:a=Be,duration:s=Je,force:n=Ve,particleCount:f=Ge,particleShape:d=Ke,particleSize:h=Qe,particleClass:_=Ye,destroyAfterDone:w=Xe,stageHeight:y=Ze,stageWidth:H=$e}=e;(function(u){if(document.querySelector("style[data-neoconfetti]"))return;const r=we("style");r.dataset.neoconfetti="",r.textContent=u,xe(document.head,r)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",y+"px");let v=[],b=[];const l=()=>ee(R()*(ka-1)),M=(u,r)=>d!=="rectangles"&&(u==="circles"||Aa(r));function S(u,r){const p=l(),o=M(d,p),i=(E,k)=>u.style.setProperty(E,k+"");i("--xlp",ke(ne(rt(r,90)-180),0,180,-H/2,H/2)+"px"),i("--dc",s-ee(1e3*R())+"ms");const m=R()<ga?Y(R()*wa,2):0;i("--x1",m),i("--x2",-1*m),i("--x3",m),i("--x4",Y(ne(ke(ne(rt(r,90)-180),0,180,-1,1)),4)),i("--y1",Y(R()*tt,4)),i("--y2",Y(R()*n*(vt()?1:-1),4)),i("--y3",tt),i("--y4",Y(xa(ke(ne(r-180),0,180,n,-n),0),4)),i("--w",(o?h:ee(4*R())+h/2)+"px"),i("--h",(o?h:ee(2*R())+h)+"px");const x=p.toString(2).padStart(3,"0").split("");i("--hr",x.map(E=>+E/2+"").join(" ")),i("--r",x.join(" ")),i("--rd",Y(R()*(ya-et)+et)+"ms"),i("--br",o?"50%":0)}let A;function z(){t.innerHTML="",clearTimeout(A),v=at(f,a),b=function(u,r=[],p){const o=[];for(const{color:i}of r){const m=we("div");m.className=`${qe} ${p}`,m.style.setProperty("--bgc",i);const x=we("div");xe(m,x),xe(u,m),o.push(m)}return o}(t,v,_);for(const[u,r]of st(b))S(r,v[+u].degree);A=setTimeout(()=>{w&&(t.innerHTML="")},s)}return z(),{update(u){const r=u.particleCount??Ge,p=u.particleShape??Ke,o=u.particleSize??Qe,i=u.particleClass??Ye,m=u.colors??Be,x=u.stageHeight??Ze,E=u.duration??Je,k=u.force??Ve,g=u.stageWidth??$e,W=u.destroyAfterDone??Xe;v=at(r,m);let P=!1;if(r===f){b=Array.from(t.querySelectorAll(`.${qe}`));for(const[D,{color:C}]of st(v)){const T=b[+D];JSON.stringify(a)!==JSON.stringify(m)&&T.style.setProperty("--bgc",C),p!==d&&T.style.setProperty("--br",M(p,l())?"50%":"0"),i!==_&&(_&&T.classList.remove(_),i&&T.classList.add(i))}}else P=!0;w&&!W&&clearTimeout(A),t.style.setProperty("--sh",x+"px"),s=E,a=m,n=k,f=r,d=p,h=o,_=i,w=W,y=x,H=g,P&&z()},destroy(){t.innerHTML="",clearTimeout(A)}}}var et=200,ya=800,ga=.1,wa=.3,tt=.5,ne=Math.abs,R=Math.random,ee=Math.round,xa=Math.max,we=t=>document.createElement(t),xe=(t,e)=>t.appendChild(e),at=(t,e)=>Array.from({length:t},(a,s)=>({color:e[s%e.length],degree:360*s/t})),Y=(t,e=2)=>ee((t+Number.EPSILON)*10**e)/10**e,ke=(t,e,a,s,n)=>(t-e)*(n-s)/(a-e)+s,rt=(t,e)=>t+e>360?t+e-360:t+e,vt=()=>R()>.5,st=Object.entries,ka=6,Aa=t=>t!==1&&vt();function nt(t,e,a){var n;t.preventDefault();const s=t.target.getAttribute("data-key");s==="backspace"?(Ee(e,c(e).slice(0,-1),!0),(n=a())!=null&&n.badGuess&&a(a().badGuess=!1,!0)):c(e).length<5&&Ee(e,c(e)+s)}var Ea=O('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Sa=O('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),Ta=O('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),za=O('<p class="svelte-1pg2j5l"> </p>'),Ma=O('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Pa=O('<button formaction="?/update" name="key"> </button>'),Ca=O('<div class="row svelte-1pg2j5l"></div>'),Ha=O('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),La=O('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Na=O('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function qa(t,e){Vt(e,!0);let a=$t(e,"form",15);const s=new ba("(prefers-reduced-motion: reduce)");let n=L(()=>e.data.answers.at(-1)==="xxxxx"),f=L(()=>c(n)?-1:e.data.answers.length),d=L(()=>e.data.guesses[c(f)]||""),h=L(()=>c(d).length===5);const _=L(()=>{let o={},i={};return e.data.answers.forEach((m,x)=>{const E=e.data.guesses[x];for(let k=0;k<5;k+=1){const g=E[k];m[k]==="x"?(o[g]="exact",i[g]="correct"):o[g]||(o[g]=m[k]==="c"?"close":"missing",i[g]=m[k]==="c"?"present":"absent")}}),{classnames:o,description:i}}),w=L(()=>c(_).classnames),y=L(()=>c(_).description);function H(o){var i;o.metaKey||o.key==="Enter"&&!c(h)||(i=document.querySelector(`[data-key="${o.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var v=Na();Zt("keydown",Qt,H),ea(o=>{var i=Ea();Kt.title="Sverdle",j(o,i)});var b=I(be(v),2),l=I(F(b),2);let M;se(l,20,()=>Array.from(Array(6).keys()),o=>o,(o,i)=>{var m=Ta();const x=L(()=>i===c(f));var E=be(m),k=F(E);U(E);var g=I(E,2);let W;se(g,20,()=>Array.from(Array(5).keys()),P=>P,(P,D)=>{var C=Sa();const T=L(()=>c(x)?c(d):e.data.guesses[i]),B=L(()=>{var N;return(N=e.data.answers[i])==null?void 0:N[D]}),ze=L(()=>{var N;return((N=c(T))==null?void 0:N[D])??""}),mt=L(()=>c(x)&&D===c(T).length),Me=L(()=>c(B)==="x"),Pe=L(()=>c(B)==="c"),Ce=L(()=>c(B)==="_");let He;var Le=F(C),ie=I(Le),pt=F(ie);{var ht=N=>{var oe=re("(correct)");j(N,oe)},bt=(N,oe)=>{{var _t=G=>{var ce=re("(present)");j(G,ce)},yt=(G,ce)=>{{var gt=K=>{var fe=re("(absent)");j(K,fe)},wt=K=>{var fe=re("empty");j(K,fe)};Q(G,K=>{c(Ce)?K(gt):K(wt,!1)},ce)}};Q(N,G=>{c(Pe)?G(_t):G(yt,!1)},oe)}};Q(pt,N=>{c(Me)?N(ht):N(bt,!1)})}U(ie);var le=I(ie,2);aa(le),U(C),V(N=>{He=$(C,1,"letter svelte-1pg2j5l",null,He,N),Z(Le,`${c(ze)??""} `),le.disabled=!c(x),Ie(le,c(ze))},[()=>({exact:c(Me),close:c(Pe),missing:c(Ce),selected:c(mt)})]),j(P,C)}),U(g),V(P=>{Z(k,`Row ${i+1}`),W=$(g,1,"row svelte-1pg2j5l",null,W,P)},[()=>({current:c(x)})]),j(o,m)}),U(l);var S=I(l,2),A=F(S);{var z=o=>{var i=Ma(),m=be(i);{var x=g=>{var W=za(),P=F(W);U(W),V(()=>Z(P,`the answer was "${e.data.answer??""}"`)),j(g,W)};Q(m,g=>{!c(n)&&e.data.answer&&g(x)})}var E=I(m,2),k=F(E);U(E),V(()=>Z(k,`${c(n)?"you won :)":"game over :("} play again?`)),j(o,i)},u=o=>{var i=Ha(),m=F(i);let x;var E=I(m,2);E.__click=[nt,d,a];var k=I(E,2);se(k,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],g=>g,(g,W)=>{var P=Ca();se(P,21,()=>W,oa,(D,C)=>{var T=Pa();T.__click=[nt,d,a];var B=F(T,!0);U(T),V(()=>{Re(T,"data-key",c(C)),$(T,1,ra(c(w)[c(C)]),"svelte-1pg2j5l"),T.disabled=c(h),Ie(T,c(C)),Re(T,"aria-label",`${c(C)??""} ${(c(y)[c(C)]||"")??""}`),Z(B,c(C))}),j(D,T)}),U(P),j(g,P)}),U(i),V(g=>{m.disabled=!c(h),x=$(m,1,"svelte-1pg2j5l",null,x,g)},[()=>({selected:c(h)})]),j(o,i)};Q(A,o=>{c(n)||e.data.answers.length>=6?o(z):o(u,!1)})}U(S),U(b),Fe(b,(o,i)=>ye==null?void 0:ye(o,i),()=>()=>({update:o})=>{o({reset:!1})});var r=I(b,2);{var p=o=>{var i=La();Fe(i,(m,x)=>ge==null?void 0:ge(m,x),()=>({particleCount:s.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),j(o,i)};Q(r,o=>{c(n)&&o(p)})}V(o=>M=$(l,1,"grid svelte-1pg2j5l",null,M,o),[()=>{var o;return{playing:!c(n),"bad-guess":(o=a())==null?void 0:o.badGuess}}]),j(t,v),Gt()}Xt(["click"]);export{qa as component};
