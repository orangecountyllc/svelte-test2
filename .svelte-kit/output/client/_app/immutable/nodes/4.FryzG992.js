var je=t=>{throw TypeError(t)};var Ne=(t,e,a)=>e.has(t)||je("Cannot "+a);var de=(t,e,a)=>(Ne(t,e,"read from private field"),a?a.call(t):e.get(t)),ue=(t,e,a)=>e.has(t)?je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),ve=(t,e,a,s)=>(Ne(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a);import{f as F,a as N,t as re}from"../chunks/BJ4OAVPy.js";import{b as xt,g as kt,l as me,h as q,n as At,F as Et,C as c,_ as St,I as Tt,J as Mt,K as We,k as pe,m as X,af as Pt,M as it,O as lt,P as zt,ax as he,aj as ot,a8 as Ue,W as Ct,ay as Ae,az as Se,aA as Ht,ai as Lt,aB as jt,av as Nt,aC as Te,aD as Wt,j as Ut,ac as It,aE as ct,aa as Dt,aF as Ie,aG as Ot,ao as Ft,u as ft,ap as dt,d as Rt,aH as qt,S as Ee,aI as Jt,as as Bt,p as Kt,s as D,f as be,t as K,a as Vt,$ as Gt,c as R,aJ as Qt,r as U,at as L}from"../chunks/l-OOohzE.js";import{o as Yt,d as Xt,e as Zt,s as Z}from"../chunks/DmoG8Bov.js";import{p as $t,i as Q}from"../chunks/Csi7Jf8V.js";import{h as ea}from"../chunks/UZF9LZrx.js";import{r as ta,a as De,s as Oe}from"../chunks/CTYm7GQV.js";import{t as aa,c as ra}from"../chunks/BRzKQYUk.js";import{i as sa,a as na,b as ia,c as la}from"../chunks/uzQXSLo-.js";function oa(t,e){return e}function ca(t,e,a,s){for(var n=[],f=e.length,d=0;d<f;d++)Ht(e[d].e,n,!0);var h=f>0&&n.length===0&&a!==null;if(h){var _=a.parentNode;Lt(_),_.append(a),s.clear(),B(t,e[0].prev,e[f-1].next)}jt(n,()=>{for(var w=0;w<f;w++){var y=e[w];h||(s.delete(y.k),B(t,y.prev,y.next)),Nt(y.e,!h)}})}function se(t,e,a,s,n,f=null){var d=t,h={flags:e,items:new Map,first:null},_=(e&ct)!==0;if(_){var w=t;d=q?me(At(w)):w.appendChild(xt())}q&&Et();var y=null,H=!1,v=St(()=>{var b=a();return It(b)?b:b==null?[]:ot(b)});kt(()=>{var b=c(v),l=b.length;if(H&&l===0)return;H=l===0;let P=!1;if(q){var S=Tt(d)===Mt;S!==(l===0)&&(d=We(),me(d),pe(!1),P=!0)}if(q){for(var A=null,M,u=0;u<l;u++){if(X.nodeType===8&&X.data===Pt){d=X,P=!0,pe(!1);break}var r=b[u],p=s(r,u);M=ut(X,h,A,null,r,p,u,n,e,a),h.items.set(p,M),A=M}l>0&&me(We())}q||fa(b,h,d,n,e,s,a),f!==null&&(l===0?y?it(y):y=lt(()=>f(d)):y!==null&&zt(y,()=>{y=null})),P&&pe(!0),c(v)}),q&&(d=X)}function fa(t,e,a,s,n,f,d){var z,I,C,T;var h=(n&Ot)!==0,_=(n&(Te|Se))!==0,w=t.length,y=e.items,H=e.first,v=H,b,l=null,P,S=[],A=[],M,u,r,p;if(h)for(p=0;p<w;p+=1)M=t[p],u=f(M,p),r=y.get(u),r!==void 0&&((z=r.a)==null||z.measure(),(P??(P=new Set)).add(r));for(p=0;p<w;p+=1){if(M=t[p],u=f(M,p),r=y.get(u),r===void 0){var o=v?v.e.nodes_start:a;l=ut(o,e,l,l===null?e.first:l.next,M,u,p,s,n,d),y.set(u,l),S=[],A=[],v=l.next;continue}if(_&&da(r,M,p,n),(r.e.f&he)!==0&&(it(r.e),h&&((I=r.a)==null||I.unfix(),(P??(P=new Set)).delete(r))),r!==v){if(b!==void 0&&b.has(r)){if(S.length<A.length){var i=A[0],m;l=i.prev;var x=S[0],E=S[S.length-1];for(m=0;m<S.length;m+=1)Fe(S[m],i,a);for(m=0;m<A.length;m+=1)b.delete(A[m]);B(e,x.prev,E.next),B(e,l,x),B(e,E,i),v=i,l=E,p-=1,S=[],A=[]}else b.delete(r),Fe(r,v,a),B(e,r.prev,r.next),B(e,r,l===null?e.first:l.next),B(e,l,r),l=r;continue}for(S=[],A=[];v!==null&&v.k!==u;)(v.e.f&he)===0&&(b??(b=new Set)).add(v),A.push(v),v=v.next;if(v===null)continue;r=v}S.push(r),l=r,v=r.next}if(v!==null||b!==void 0){for(var k=b===void 0?[]:ot(b);v!==null;)(v.e.f&he)===0&&k.push(v),v=v.next;var g=k.length;if(g>0){var W=(n&ct)!==0&&w===0?a:null;if(h){for(p=0;p<g;p+=1)(C=k[p].a)==null||C.measure();for(p=0;p<g;p+=1)(T=k[p].a)==null||T.fix()}ca(e,k,W,y)}}h&&Dt(()=>{var J;if(P!==void 0)for(r of P)(J=r.a)==null||J.apply()}),Ue.first=e.first&&e.first.e,Ue.last=l&&l.e}function da(t,e,a,s){(s&Te)!==0&&Ie(t.v,e),(s&Se)!==0?Ie(t.i,a):t.i=a}function ut(t,e,a,s,n,f,d,h,_,w){var y=(_&Te)!==0,H=(_&Wt)===0,v=y?H?Ct(n,!1,!1):Ae(n):n,b=(_&Se)===0?d:Ae(d),l={i:b,v,k:f,a:null,e:null,prev:a,next:s};try{return l.e=lt(()=>h(t,v,b,w),q),l.e.prev=a&&a.e,l.e.next=s&&s.e,a===null?e.first=l:(a.next=l,a.e.next=l.e),s!==null&&(s.prev=l,s.e.prev=l.e),l}finally{}}function Fe(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,f=t.e.nodes_start;f!==s;){var d=Ut(f);n.before(f),f=d}}function B(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Re(t,e,a){Ft(()=>{var s=ft(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var n=!1,f={};dt(()=>{var d=a();Rt(d),n&&qt(f,d)&&(f=d,s.update(d))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function $(t,e,a,s,n,f){var d=t.__className;if(q||d!==a||d===void 0){var h=aa(a,s,f);(!q||h!==t.getAttribute("class"))&&(h==null?t.removeAttribute("class"):t.className=h),t.__className=a}else if(f&&n!==f)for(var _ in f){var w=!!f[_];(n==null||w!==!!n[_])&&t.classList.toggle(_,w)}return f}function ua(t){Ee(t,t.v+1)}function va(t){let e=0,a=Ae(0),s;return()=>{Jt()&&(c(a),dt(()=>(e===0&&(s=ft(()=>t(()=>ua(a)))),e+=1,()=>{Bt().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}var te,ae;class ma{constructor(e,a){ue(this,te);ue(this,ae);ve(this,te,e),ve(this,ae,va(a))}get current(){return de(this,ae).call(this),de(this,te).call(this)}}te=new WeakMap,ae=new WeakMap;const pa=/\(.+\)/,ha=new Set(["all","print","screen","and","or","not","only"]);class ba extends ma{constructor(e,a){let s=pa.test(e)||e.split(/[\s,]+/).some(f=>ha.has(f.trim()))?e:`(${e})`;const n=window.matchMedia(s);super(()=>n.matches,f=>Yt(n,"change",f))}}function _a(t){const e=JSON.parse(t);return e.data&&(e.data=ia(e.data,la.decoders)),e}function _e(t){return HTMLElement.prototype.cloneNode.call(t)}function ye(t,e=()=>{}){const a=async({action:n,result:f,reset:d=!0,invalidateAll:h=!0})=>{f.type==="success"&&(d&&HTMLFormElement.prototype.reset.call(t),h&&await sa()),(location.origin+location.pathname===n.origin+n.pathname||f.type==="redirect"||f.type==="error")&&await na(f)};async function s(n){var P,S,A,M,u;if(((P=n.submitter)!=null&&P.hasAttribute("formmethod")?n.submitter.formMethod:_e(t).method)!=="post")return;n.preventDefault();const d=new URL((S=n.submitter)!=null&&S.hasAttribute("formaction")?n.submitter.formAction:_e(t).action),h=(A=n.submitter)!=null&&A.hasAttribute("formenctype")?n.submitter.formEnctype:_e(t).enctype,_=new FormData(t),w=(M=n.submitter)==null?void 0:M.getAttribute("name");w&&_.append(w,((u=n.submitter)==null?void 0:u.getAttribute("value"))??"");const y=new AbortController;let H=!1;const b=await e({action:d,cancel:()=>H=!0,controller:y,formData:_,formElement:t,submitter:n.submitter})??a;if(H)return;let l;try{const r=new Headers({accept:"application/json","x-sveltekit-action":"true"});h!=="multipart/form-data"&&r.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(h)?h:"application/x-www-form-urlencoded");const p=h==="multipart/form-data"?_:new URLSearchParams(_),o=await fetch(d,{method:"POST",headers:r,cache:"no-store",body:p,signal:y.signal});l=_a(await o.text()),l.type==="error"&&(l.status=o.status)}catch(r){if((r==null?void 0:r.name)==="AbortError")return;l={type:"error",error:r}}await b({action:d,formData:_,formElement:t,update:r=>a({action:d,result:l,reset:r==null?void 0:r.reset,invalidateAll:r==null?void 0:r.invalidateAll}),result:l})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",s),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",s)}}}var qe="mz3PUW_p",Je=["#FFC700","#FF0000","#2E3191","#41BBC7"],Be=3500,Ke=.5,Ve=150,Ge="mix",Qe=12,Ye="",Xe=!0,Ze=800,$e=1600;function ge(t,e={}){let{colors:a=Je,duration:s=Be,force:n=Ke,particleCount:f=Ve,particleShape:d=Ge,particleSize:h=Qe,particleClass:_=Ye,destroyAfterDone:w=Xe,stageHeight:y=Ze,stageWidth:H=$e}=e;(function(u){if(document.querySelector("style[data-neoconfetti]"))return;const r=we("style");r.dataset.neoconfetti="",r.textContent=u,xe(document.head,r)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",y+"px");let v=[],b=[];const l=()=>ee(O()*(ka-1)),P=(u,r)=>d!=="rectangles"&&(u==="circles"||Aa(r));function S(u,r){const p=l(),o=P(d,p),i=(E,k)=>u.style.setProperty(E,k+"");i("--xlp",ke(ne(rt(r,90)-180),0,180,-H/2,H/2)+"px"),i("--dc",s-ee(1e3*O())+"ms");const m=O()<ga?Y(O()*wa,2):0;i("--x1",m),i("--x2",-1*m),i("--x3",m),i("--x4",Y(ne(ke(ne(rt(r,90)-180),0,180,-1,1)),4)),i("--y1",Y(O()*tt,4)),i("--y2",Y(O()*n*(vt()?1:-1),4)),i("--y3",tt),i("--y4",Y(xa(ke(ne(r-180),0,180,n,-n),0),4)),i("--w",(o?h:ee(4*O())+h/2)+"px"),i("--h",(o?h:ee(2*O())+h)+"px");const x=p.toString(2).padStart(3,"0").split("");i("--hr",x.map(E=>+E/2+"").join(" ")),i("--r",x.join(" ")),i("--rd",Y(O()*(ya-et)+et)+"ms"),i("--br",o?"50%":0)}let A;function M(){t.innerHTML="",clearTimeout(A),v=at(f,a),b=function(u,r=[],p){const o=[];for(const{color:i}of r){const m=we("div");m.className=`${qe} ${p}`,m.style.setProperty("--bgc",i);const x=we("div");xe(m,x),xe(u,m),o.push(m)}return o}(t,v,_);for(const[u,r]of st(b))S(r,v[+u].degree);A=setTimeout(()=>{w&&(t.innerHTML="")},s)}return M(),{update(u){const r=u.particleCount??Ve,p=u.particleShape??Ge,o=u.particleSize??Qe,i=u.particleClass??Ye,m=u.colors??Je,x=u.stageHeight??Ze,E=u.duration??Be,k=u.force??Ke,g=u.stageWidth??$e,W=u.destroyAfterDone??Xe;v=at(r,m);let z=!1;if(r===f){b=Array.from(t.querySelectorAll(`.${qe}`));for(const[I,{color:C}]of st(v)){const T=b[+I];JSON.stringify(a)!==JSON.stringify(m)&&T.style.setProperty("--bgc",C),p!==d&&T.style.setProperty("--br",P(p,l())?"50%":"0"),i!==_&&(_&&T.classList.remove(_),i&&T.classList.add(i))}}else z=!0;w&&!W&&clearTimeout(A),t.style.setProperty("--sh",x+"px"),s=E,a=m,n=k,f=r,d=p,h=o,_=i,w=W,y=x,H=g,z&&M()},destroy(){t.innerHTML="",clearTimeout(A)}}}var et=200,ya=800,ga=.1,wa=.3,tt=.5,ne=Math.abs,O=Math.random,ee=Math.round,xa=Math.max,we=t=>document.createElement(t),xe=(t,e)=>t.appendChild(e),at=(t,e)=>Array.from({length:t},(a,s)=>({color:e[s%e.length],degree:360*s/t})),Y=(t,e=2)=>ee((t+Number.EPSILON)*10**e)/10**e,ke=(t,e,a,s,n)=>(t-e)*(n-s)/(a-e)+s,rt=(t,e)=>t+e>360?t+e-360:t+e,vt=()=>O()>.5,st=Object.entries,ka=6,Aa=t=>t!==1&&vt();function nt(t,e,a){var n;t.preventDefault();const s=t.target.getAttribute("data-key");s==="backspace"?(Ee(e,c(e).slice(0,-1),!0),(n=a())!=null&&n.badGuess&&a(a().badGuess=!1,!0)):c(e).length<5&&Ee(e,c(e)+s)}var Ea=F('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l"/>'),Sa=F('<div> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"/></div>'),Ta=F('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div></div>',1),Ma=F('<p class="svelte-1pg2j5l"> </p>'),Pa=F('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),za=F('<button formaction="?/update" name="key"> </button>'),Ca=F('<div class="row svelte-1pg2j5l"></div>'),Ha=F('<div class="keyboard svelte-1pg2j5l"><button data-key="enter">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),La=F('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),ja=F('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Ja(t,e){Kt(e,!0);let a=$t(e,"form",15);const s=new ba("(prefers-reduced-motion: reduce)");let n=L(()=>e.data.answers.at(-1)==="xxxxx"),f=L(()=>c(n)?-1:e.data.answers.length),d=L(()=>e.data.guesses[c(f)]||""),h=L(()=>c(d).length===5);const _=L(()=>{let o={},i={};return e.data.answers.forEach((m,x)=>{const E=e.data.guesses[x];for(let k=0;k<5;k+=1){const g=E[k];m[k]==="x"?(o[g]="exact",i[g]="correct"):o[g]||(o[g]=m[k]==="c"?"close":"missing",i[g]=m[k]==="c"?"present":"absent")}}),{classnames:o,description:i}}),w=L(()=>c(_).classnames),y=L(()=>c(_).description);function H(o){var i;o.metaKey||o.key==="Enter"&&!c(h)||(i=document.querySelector(`[data-key="${o.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0,bubbles:!0}))}var v=ja();Zt("keydown",Qt,H),ea(o=>{var i=Ea();Gt.title="Sverdle",N(o,i)});var b=D(be(v),2),l=D(R(b),2);let P;se(l,20,()=>Array.from(Array(6).keys()),o=>o,(o,i)=>{var m=Ta();const x=L(()=>i===c(f));var E=be(m),k=R(E);U(E);var g=D(E,2);let W;se(g,20,()=>Array.from(Array(5).keys()),z=>z,(z,I)=>{var C=Sa();const T=L(()=>c(x)?c(d):e.data.guesses[i]),J=L(()=>{var j;return(j=e.data.answers[i])==null?void 0:j[I]}),Me=L(()=>{var j;return((j=c(T))==null?void 0:j[I])??""}),mt=L(()=>c(x)&&I===c(T).length),Pe=L(()=>c(J)==="x"),ze=L(()=>c(J)==="c"),Ce=L(()=>c(J)==="_");let He;var Le=R(C),ie=D(Le),pt=R(ie);{var ht=j=>{var oe=re("(correct)");N(j,oe)},bt=(j,oe)=>{{var _t=V=>{var ce=re("(present)");N(V,ce)},yt=(V,ce)=>{{var gt=G=>{var fe=re("(absent)");N(G,fe)},wt=G=>{var fe=re("empty");N(G,fe)};Q(V,G=>{c(Ce)?G(gt):G(wt,!1)},ce)}};Q(j,V=>{c(ze)?V(_t):V(yt,!1)},oe)}};Q(pt,j=>{c(Pe)?j(ht):j(bt,!1)})}U(ie);var le=D(ie,2);ta(le),U(C),K(j=>{He=$(C,1,"letter svelte-1pg2j5l",null,He,j),Z(Le,`${c(Me)??""} `),le.disabled=!c(x),De(le,c(Me))},[()=>({exact:c(Pe),close:c(ze),missing:c(Ce),selected:c(mt)})]),N(z,C)}),U(g),K(z=>{Z(k,`Row ${i+1}`),W=$(g,1,"row svelte-1pg2j5l",null,W,z)},[()=>({current:c(x)})]),N(o,m)}),U(l);var S=D(l,2),A=R(S);{var M=o=>{var i=Pa(),m=be(i);{var x=g=>{var W=Ma(),z=R(W);U(W),K(()=>Z(z,`the answer was "${e.data.answer??""}"`)),N(g,W)};Q(m,g=>{!c(n)&&e.data.answer&&g(x)})}var E=D(m,2),k=R(E);U(E),K(()=>Z(k,`${c(n)?"you won :)":"game over :("} play again?`)),N(o,i)},u=o=>{var i=Ha(),m=R(i);let x;var E=D(m,2);E.__click=[nt,d,a];var k=D(E,2);se(k,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],g=>g,(g,W)=>{var z=Ca();se(z,21,()=>W,oa,(I,C)=>{var T=za();T.__click=[nt,d,a];var J=R(T,!0);U(T),K(()=>{Oe(T,"data-key",c(C)),$(T,1,ra(c(w)[c(C)]),"svelte-1pg2j5l"),T.disabled=c(h),De(T,c(C)),Oe(T,"aria-label",`${c(C)??""} ${(c(y)[c(C)]||"")??""}`),Z(J,c(C))}),N(I,T)}),U(z),N(g,z)}),U(i),K(g=>{m.disabled=!c(h),x=$(m,1,"svelte-1pg2j5l",null,x,g)},[()=>({selected:c(h)})]),N(o,i)};Q(A,o=>{c(n)||e.data.answers.length>=6?o(M):o(u,!1)})}U(S),U(b),Re(b,(o,i)=>ye==null?void 0:ye(o,i),()=>()=>({update:o})=>{o({reset:!1})});var r=D(b,2);{var p=o=>{var i=La();Re(i,(m,x)=>ge==null?void 0:ge(m,x),()=>({particleCount:s.current?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),N(o,i)};Q(r,o=>{c(n)&&o(p)})}K(o=>P=$(l,1,"grid svelte-1pg2j5l",null,P,o),[()=>{var o;return{playing:!c(n),"bad-guess":(o=a())==null?void 0:o.badGuess}}]),N(t,v),Vt()}Xt(["click"]);export{Ja as component};
